# T-103 チェックリスト — ポート8001の競合チェックとヘルス監視設定

最終更新: 2025-10-13  
責任者: me  
期日: 2025-10-18  
依存: なし  

目的
- MCP FS サーバ予定ポート（8001）の競合を検出・解消し、ヘルス監視（healthz 200）までの検証証跡を作成する。

作業手順（Plan→Test→Patch）
1) Plan: 監視方針の確認（Snapshot MD 記録・UIサーバ停止状態で検査）
2) Test: 競合検査
   - コマンド（絶対パス推奨）:
     - `C:\Users\User\Trae\ORCH-Next\.venv\Scripts\python.exe C:\Users\User\Trae\ORCH-Next\scripts\ops\check_port.py 8001`
   - 期待結果: `[check_port] PORT 8001 free.`（ExitCode=0）。競合時は Netstat 出力確認。
3) Test: スナップショット取得
   - コマンド: `pwsh C:\Users\User\Trae\ORCH-Next\scripts\ops\write_port_snapshot.ps1 -Port 8001`
   - 出力: `C:\Users\User\Trae\ORCH-Next\ORCH\STATE\PORTS_YYYYMMDD.md`
4) Patch: 監視設定の反映（必要に応じて）
   - 監視ツールに 8001 を追加（手順は WORK_RULES.md を参照）
   - `CURRENT_MILESTONE.md` に検証済みの旨を追記。

受入基準（Definition of Done）
- 8001 競合なし（ExitCode=0）
- Snapshot MD に healthz 情報が記録されている（ERR の場合は原因記載）
- WORK_TRACKING.md と MILESTONES.md に更新が反映されている

関係絶対パス（使用・生成）
- 検査: `C:\Users\User\Trae\ORCH-Next\scripts\ops\check_port.py`
- 記録: `C:\Users\User\Trae\ORCH-Next\scripts\ops\write_port_snapshot.ps1`
- 証跡: `C:\Users\User\Trae\ORCH-Next\ORCH\STATE\PORTS_YYYYMMDD.md`

メモ
- `project_rules.yaml` の Windows 絶対パス準拠・`/`禁止・`..`禁止に従うこと。
- 作業ログは `WORK_TRACKING.md` に必ず記録する。