# UI 監査レポート（2025-10-13）

## 概要
本レポートは ORCH-Next の WebUI（ダッシュボード／スタイル管理）の監査・動作検証・タスク再評価の結果を記録するものです。

## 実施内容
1. ディレクトリ構成とプロセスの現状把握（src 配下の UI 関連ファイル、templates/static）
2. 重複起動プロセスの検出と解消（`python src/dashboard.py` と `flask run` の競合）
3. 実地確認（http://localhost:5000/dashboard, /style-manager のプレビュー）
4. テストの実施（pytest 全件）
5. 残タスクの抽出と優先順位付け（重要度×緊急度）

## 監査結果の詳細
- 構成：`src/dashboard.py` と `src/style_manager.py` に UI ロジックが分散。templates と static に基本アセットが存在。
- プロセス：2 つの Python プロセスが同時起動しており、ポート5000競合の可能性が高い。
- 実地：サーバを単一化後、UI 画面のプレビューを確認。UI 遷移・読み込みの基本動作を再検証。
- テスト：`pytest -q` は 100% 合格。ユニット／統合テストは良好も、UI e2e は未カバー。

## 改善提案
1. Flask 起動の一本化（`flask run` へ統一）
2. ヘルスチェック `/healthz` の追加（CIの起動判定に利用）
3. CSS/JS のモジュール分離（`static/css`・`static/js` へ抽出）
4. UI e2e テスト（Playwright）を `tests/e2e/ui` に追加

## 優先順位（重要度×緊急度）
1. UI 起動競合解消（高×高）
2. 進行中タスク（008/010/011）の継続管理（TTL/ロック）
3. UI e2e テスト追加（品質ゲート強化）
4. CSS/JS 分離リファクタ（保守性向上）
5. Backup スクリプト UT（014）
6. CI ワークフロー整合性レビュー（015）
7. Backup ドキュメント拡充（016）

## 実施ステータス
- 重複プロセス停止：完了
- 単一サーバでのプレビュー確認：完了
- テストスイート実行（pytest）：完了（全件 PASS）
- ドキュメント整備：本レポート作成済み／チェックリスト・マイルストーンは別紙更新

## 次のアクション
1. `/healthz` の追加実装と CI 連携
2. Playwright による UI e2e の導入（要素選択・スタイル適用の回帰）
3. CSS/JS 分離の着手とキャッシュ制御（バージョン付与）
4. 進行中タスク（008/010/011）のハートビート更新と進捗記録

---
作成者: CMD（監査） / WORK（実行）
最終更新: 2025-10-13