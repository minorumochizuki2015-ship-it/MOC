# 753.193 Party Reflex 比較・ロードマップ

## 1. 参考情報

- 公式仕様: 753.193 Party Reflex｜プロダクト企画書 v2.0
- リリース基準: 1–4人ローカル対戦、飲酒表現オプトイン、オフライン計測
- 参考アプリ: "はーいどん"（Android / App Store ID 1582939929）
- 現状実装: Kivyデモ（state/timing/quiz/category 雛形＋UI骨格）

## 2. 現状のギャップまとめ

| 項目 | 仕様書 | 現行デモ | はーいどん | ギャップ/メモ |
|------|--------|----------|------------|----------------|
| **画面構成** | ホーム/カテゴリ/メンバー/プレイ/結果 | Arena/カテゴリ/結果のみ | ホーム→人数→プレイ→結果 | ホーム/メンバー導線が未実装 |
| **ビジュアル** | 指定色・丸直径・安全領域・アニメ | フラットUIのみ | ポップ演出・背景・サウンド | カラーガイド/アニメーション不足 |
| **出題** | G1/G2/G3 + 効果チェーン | テキスト数件 + flip/mosaic/shake 雛形 | ボイス/ランダム遅延 | 画像/音声/カテゴリ不足 |
| **モーション** | 握りアイコン点滅、Cue白→黄120ms | Flash仮実装のみ | ドン!演出・振動あり | 握り表示・ハプティクス未実装 |
| **サウンド** | reveal/fault/win.wav | 未実装 | 効果音あり | SEと振動が必要 |
| **メンバー設定** | 名前/COM/Lv/配置 | 未実装 | 人数選択のみ | メンバー設定UI追加が必要 |
| **ログ** | RoundResult JSON (送信なし) | JSON書き込み済 | 不明 | 仕様準拠OK |
| **フォント** | 日本語ゴシック | 自動検出済 | 日本語表示 | 現状OK |
| **テスト** | pytest/mypy/80%カバレッジ | 単体テスト整備済・既存レガシ失敗 | -- | Legacy改修で後続対応 |

## 3. 優先タスク計画

### Phase A: コア体験（プレイ1ループ）
1. **出題エンジン拡張**
   - G1テキスト20問程度
   - G2画像カテゴリ（10枚程度の仮素材）
   - 効果: flip/mosaic/shake 詳細ロジック
2. **プレイ画面演出**
   - CuePanel白→黄アニメ、shake挙動
   - 握りアイコン点滅、ヒットテスト半径調整
   - reveal/fault/win サウンド＆ハプティクス
3. **結果画面**
   - ランキング表/連勝ピル/同着処理
   - シード表示や再戦導線整備

### Phase B: プレイ前導線
1. ホーム画面・ゲーム選択
2. メンバー設定モーダル（名前/COM/Lv/ドラッグ）
3. カテゴリ選択UX仕上げ（お気に入り/全選択・解除/件数表示）

### Phase C: 補強・検証
1. モバイル適応（ヒット範囲、レスポンシブ、モバイル検出）
2. テスト拡充（Kivy統合テスト・Legacy修正）
3. リソース管理（画像/SFX/ログ削除UI）

## 4. 直近アクション

- [ ] Phase A-1: 出題データ拡充と効果ロジック精緻化
- [ ] Phase A-2: CuePanelアニメーションとサウンド実装
- [ ] Phase A-3: 結果画面UI仕上げ

上記完了後に Phase B/C の具体的スケジュールを確定する。
