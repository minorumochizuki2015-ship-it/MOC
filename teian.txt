【統合移行のお知らせ】
本ドキュメントの内容は、単一ソースの「docs/teian.md」へ統合されました。最新の提案カバレッジ、最小コアAPI契約、実装/テスト根拠、運用方針は docs/teian.md を参照してください。

---

データ結合

コネクタ：CSV/Excel、REST、gSheets、DB、BigQuery、Supabase。

データモデル：表/ビュー定義、列型、キー、関係。

クエリビルダー：JOIN/集計/フィルタのGUI。式エディタ（安全なサンドボックス）。

サンプルデータ自動生成とモック切替。

キャッシュと手動更新、スケジュール更新。

レイアウト編集

オートレイアウト（スタック/グリッド）、スナップ、スマートガイド。

制約（Pin、Min/Max、アスペクト）、レスポンシブブレークポイント。

コンポーネント化＋バリアント（状態：通常/ホバー/空/ローディング）。

テーマトークン（色/余白/角丸）。ダーク/ライト即時切替。

キーボード操作とコマンドパレット（Ctrl+K）。履歴/Undo/Redo。

可視化・UI要素

KPIカード、ゲージ、スパークライン、アノマリーバンド付き時系列。

ピボット表、クロス集計、コホート、ファネル、ヒートマップ、ツリーマップ、サンキー。

地図（ヒート/クラスタ）、カレンダー、ガント、タイムライン、カンバン。

フォームビルダー（検証、条件分岐、計算フィールド）、ウィザード、ステッパー。

通知トースト、モーダル、ドロワー、タブ、アコーディオン、トグルフィルタ。

HP用ブロック：ヒーロー、CTA、価格表、FAQ、ブログカード、レビュー、フッタ。

AI補助

自然言語→チャート生成とデータ結合提案。

異常検知と説明生成、外れ値ハイライト。

自動レイアウト整列、色覚多様性対応配色提案。

テキスト要約、ツールチップ自動作成、空状態コピー自動生成。

協働

リアルタイム共同編集、コメント、メンション。

バージョン管理と差分表示、ドラフト→承認→公開、1クリックロールバック。

ロール別権限（閲覧/編集/公開）。監査ログ。

配布・運用

埋め込みコード、公開リンク、SSO保護、行レベル権限。

端末プレビュー、パフォーマンス計測、仮想スクロール。

アクセシビリティ検査（コントラスト/ラベル）。色覚シミュレータ。

環境別設定（dev/stg/prod）、スナップショット、定期エクスポート。

品質ダッシュボード特化の要素

テストカバレッジの層別ドリルダウン（モジュール/期間/担当）。

エラー熱地図（機能×日）、回帰検出バッジ、SLAゲージ。

推奨アクションの根拠リンク化とワンクリックJira/Trello発行。

実装メモ（最小コア）

スキーマ駆動：Page{components[], bindings[], tokens[]}。

表現式エンジン（安全評価）とイベント配線。

JSON差分保存＋履歴ストア。公開はスナップショットIDで不変参照。

プラグインAPI（データソース/ウィジェット/テーマ）。i18n。

次の一手（小さく効く）

コマンドパレット＋ショートカット。

オートレイアウトとスナップ精度の向上。

バージョン履歴と公開ロールバック。


となる差別化（7点）

セマンティック・アンカー：DOMを構文木＋意味ラベル化（役割・意図・可視文言・ARIA・計測ID）→CSSセレクタに依存せず安定参照。

ソース逆引き：DOM→元ファイル（HTML/MDX/テンプレ/CMS/画像）を追跡。sourcemap・ルーティング規約・ヒューリスティクス併用。

最小unified diff生成：指示をAST変換し、行差分を最小化（テキスト・スタイル・属性・画像最適化）。改行/エンコ不変。

制約付きオートレイアウト補修：崩れ検知→制約（min/max/比率/折返し）でCSS提案。視覚差分が±X%以内なら自動適用。

多層ガード：HTML整合・アクセシビリティ（WCAG）・Lighthouse・リンク切れ・視覚回帰の4ゲートを自動テスト。

適用モード3種：①PR作成 ②リバプロ注入（即時検証） ③ブラウザ拡張の一時パッチ（営業/編集向け）。

説明責任：各変更に“根拠カード”（検出→提案→影響範囲→テスト結果→ロールバック手順）を自動添付。

操作体験

①URL投入 → クローラがSite Graph生成（ページ/コンポーネント/アセットの依存）。

②画面で要素をクリック or 範囲選択 → セマンティック・アンカーが対象を特定。

③自然言語で指示：「ヒーロー見出しを短く」「ファーストビューCLSを0.1未満に」

④最小diffと影響スコア提示 → ワンクリック検証（4ゲート） → 適用モード選択。

⑤失敗なら自動ロールバック。履歴はスナップショットIDで永続化。

MCPコマンド設計（例）

site.load { url } → { graph_id }

site.select { graph_id, by:{point|css|text|xpath}, scope } → { anchor_id[] }

patch.propose { anchors, instruction, constraints } → { diff_id, diffs[], preview_url }

patch.test { diff_id, gates:["html","a11y","perf","visual"] } → { report, pass }

patch.apply { diff_id, mode:"pr|proxy|browser" } → { apply_id, rollback_token }

patch.rollback { apply_id, token } → { ok }

“作成では戦わない”強み

他社AIビルダー産のHTMLでも逆引き→精密修正が可能。

編集は要素単位の目的語で完結（例：価格表→税込表記追加、FAQ→構造化データ付与）。

継続価値：リリース後の運用・品質・法令対応を自動化（Cookie/プライポリ、構造化データ、LCP予算等）。

画期的ユースケース

“法令/規約モード”：特商法表記・Cookie同意・プライバシーの欠落検知→自動挿入パッチ。

“計測整備”：主要CTAにdata-layer付与、GTMイベント自動配線。

“画像最適化”：ヒーロー画像をAVIF+<picture>に置換、fetchpriority/decoding自動設定。

“a11yレスキュー”：コントラスト/ラベル/フォーカスリングを一括是正。

“コピー整形”：トーン/長さ/用語統一をスタイルガイド基準で自動校正。

品質・運用（主権者様ポリシー準拠）

変更は最小unified diffのみ。全置換禁止。

書込は原子的＋直後検証＋即ロールバック可。

ログはdata/logs/current/、機密は未出力。

OPENAI_COMPAT_BASEとAPI_KEYのみ使用。